<html style="height:100%">
  <head>
    <script src="https://unpkg.com/htmx.org@1.9.2" integrity="sha384-L6OqL9pRWyyFU3+/bjdSri+iIphTN/bvYyM37tICVyOJkWZLpP2vGn6VUEXgzg6h" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/hyperscript.org@0.9.8"></script>

    <link href="https://unpkg.com/nes.css@latest/css/nes.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Press+Start+2P" rel="stylesheet">

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    {{block "head" .}}{{end}}

    <style>
     html, body, pre, code, kbd, samp {
         font-family: 'Press Start 2P';
     }
    </style>

    <style id="user-style">
     body {
         background: {{.Layout.BackgroundGradient.Render}}
     }
    </style>

    <style>
     .ghost {
         background:rgba(255,255,255,1.0);
     }
    </style>

    <style>
     body {
         height: 100vh;
         max-width: 960px;
         margin: 0 auto;
     }
    </style>
  </head>
  <body style="height: 100%" hx-boost="false">
    <div style="height: 100%; display:flex; flex-direction: column; gap: 1em">
      <header style="display:flex;gap:1em" class="nes-container is-dark">
        <a class="nes-btn is-primary" href="/">OJ</a>

        {{if (eq .Layout.UnreadCount 0)}}
        <a class="nes-btn" href="/u">Chat</a>
        {{else}}
        <a class="nes-btn is-error" href="/u">Chat({{.Layout.UnreadCount}})</a>
        {{end}}

        <span style="flex:1"></span>
        <a class="nes-btn is-primary" href="/u/{{.Layout.User.ID}}">{{.Layout.User.Username}}</a>
        <span></span><!-- something makes the final element 4px taller!? -->
      </header>

      <main style="flex:auto; height:100%; overflow: auto">
        {{block "main" .}}{{end}}
      </main>
      <footer>
        {{block "footer" .}}{{end}}
      </footer>
    </div>
  </body>
</html>

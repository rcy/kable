<html style="height:100%">
  <head>
    <script src="https://unpkg.com/htmx.org@1.9.2" integrity="sha384-L6OqL9pRWyyFU3+/bjdSri+iIphTN/bvYyM37tICVyOJkWZLpP2vGn6VUEXgzg6h" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/hyperscript.org@0.9.8"></script>

    <link href="https://unpkg.com/nes.css@latest/css/nes.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Press+Start+2P" rel="stylesheet">

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    {{block "head" .}}{{end}}

    <style>
     html, body, pre, code, kbd, samp {
         font-family: 'Press Start 2P';
     }
    </style>

    <style id="user-style">
     body {
         background: {{.Layout.BackgroundGradient.Render}}
     }
    </style>

    <style>
     .ghost {
         background:rgba(255,255,255,1.0);
     }
    </style>

    <style>
     body {
         height: 100vh;
     }
    </style>
  </head>
  <body style="height: 100%" hx-boost="false">
    <div style="height: 100%;display:flex; flex-direction:column; gap: 1em;">
      <header style="background: rgba(0,0,0,.9); color:white;">
        <div style="max-width: 960px; margin: 0 auto;">
          <div style="padding: 1em 0 1em">

            <div style="display:flex;gap:4px;align-items:center;justify-content:space-between">
              
              <a href="/" style="display:flex; align-items: center; gap:6px; color: inherit; text-decoration: none">
                <i class="nes-icon  coin"></i>
                <h3 style="margin:0">Octopus Jr</h3>
              </a>

              {{if (eq .Layout.UnreadCount 0)}}
              <a href="/u">Chat</a>
              {{else}}
              <a href="/u">Chat({{.Layout.UnreadCount}})</a>
              {{end}}

              <a href="/u/{{.Layout.User.ID}}"
                 style="display:flex; align-items: center; gap:6px; color: inherit; text-decoration: none">
                <span>{{.Layout.User.Username}}</span>
                <img src="{{.Layout.User.AvatarURL}}" height="40px" width="40px">
              </a>
            </div>
          </div>
        </div>
      </header>

      <main style="flex:auto; height:100%; overflow: auto;">
        <div style="max-width: 960px; margin: 0 auto;">
          {{block "main" .}}{{end}}
        </div>
      </main>
      <footer>
        {{block "footer" .}}{{end}}
      </footer>
    </div>
    
  </body>
</html>

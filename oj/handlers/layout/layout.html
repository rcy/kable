<html>
  <head>
    <script src="https://unpkg.com/htmx.org@1.9.2" integrity="sha384-L6OqL9pRWyyFU3+/bjdSri+iIphTN/bvYyM37tICVyOJkWZLpP2vGn6VUEXgzg6h" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/htmx.org/dist/ext/ws.js"></script>
    <script src="https://unpkg.com/hyperscript.org@0.9.8"></script>
    <script src="https://unpkg.com/hyperscript.org@0.9.8/dist/socket.js"></script>
    <script src="https://unpkg.com/hyperscript.org@0.9.8/dist/eventsource.js"></script>

    <link rel="stylesheet" href="https://unpkg.com/missing.css@1.0.9/dist/missing.min.css">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style id="user-style">
     body {
         background: {{.Layout.BackgroundGradient.Render}}
     }
    </style>

    <style>
     body {
         height: 100vh;
     }

     main {
         border: solid 2px black;
         border-radius: 10px;
         background: rgba(255,255,255,.2);
         padding: 1em;
     }

     /* https://projects.verou.me/bubbly/ */
     .speech-bubble {
         margin-top: 1em;
	 position: relative;
         border-radius: .4em;
         padding: 1em;
         --shadow-rgb: 0,0,255;
         box-shadow: 1px 2px 0px rgba(var(--shadow-rgb),.13);
     }

     .speech-bubble.left {
	 background: #ffffff;
         margin-left: 12px;
     }
     .speech-bubble.right {
	 background: #d9fdd3;
         margin-right: 12px;
     }

     .speech-bubble:after {
	 content: '';
	 position: absolute;
	 top: 50%;
	 width: 0;
	 height: 0;
	 border: 12px solid transparent;
	 margin-top: -12px;
     }

     .speech-bubble.left:after {
	 left: 0;
	 border-right-color: #ffffff;
	 border-left: 0;
	 margin-left: -12px;
     }

     .speech-bubble.right:after {
	 right: 0;
	 border-left-color: #d9fdd3;
	 border-right: 0;
	 margin-right: -12px;
     }
    </style>
  </head>
  <body style="height: 100vh" hx-ext="ws" hx-boost="false">
    <div class="f-col height:100%" style="--gap: 0">
      <div>
        <header class="navbar" style="--gap: 0">
          <nav aria-label="Site sections">
            <ul role="list">
              <li><a href="/">üêô OJ</a></li>
              <li><a href="/u">Friends</a></li>
              <li><a href="/tools">Background</a></li>
              <li><a href="/u/{{.Layout.User.Username}}">{{.Layout.User.Username}}</a></li>
            </ul>
          </nav>
        </header>
      </div>

      <div class="flex-grow:1 align-self:stretch height:100%" style="overflow-y: hidden">
        <main class="height:100%">
          <div class="height:100%" style="overflow:auto">
            {{block "main" .}}{{end}}
          </div>
        </main>
      </div>

      <div class="flex-grow:0">
        <button _="on click call sock.send({'foo':123})">click this</button>
      </div>
    </div>

    <!-- <script type="text/hyperscript">
         socket MySocket /realtime
         on message as text
         log message
         end
         </script>
    -->
  </body>
</html>
